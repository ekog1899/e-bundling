<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Main extends CI_Controller {

    public function __construct()
    {
        parent::__construct();
        //load model admin
        $this->load->model('m_akses','admin');
		$this->load->model('banding_model','banding');
		$this->banding->init();
    }

	public function index()
	{
		# print_r($this->session->userdata());exit;
		 if($this->admin->is_login())
		{

		     $data['content'] = "Welcome";
             $data['title'] = "Banding Belum Kirim";
			 $data['profile'] = $this->session->userdata();
			 $data_content['banding_blm_kirim'] = $this->banding->belum_kirim();
			
		     $data['content'] = $this->load->view("dashboard",$data_content,true);
             $this->load->view("template",$data);

		}else{

			//jika session belum terdaftar, maka redirect ke halaman login
			redirect("login");

		}
	}

	public function logout()
	{
		$this->session->sess_destroy();
		redirect('login');
	}
	
	public function get_hari_ini(){
		return $this->format_hari_tanggal(date('Y-m-d'));
	}
	
	function format_hari_tanggal($waktu)
	{
		$hari_array = array(
			'Minggu',
			'Senin',
			'Selasa',
			'Rabu',
			'Kamis',
			'Jumat',
			'Sabtu'
		);
		$hr = date('w', strtotime($waktu));
		$hari = $hari_array[$hr];
		$tanggal = date('j', strtotime($waktu));
		$bulan_array = array(
			1 => 'Januari',
			2 => 'Februari',
			3 => 'Maret',
			4 => 'April',
			5 => 'Mei',
			6 => 'Juni',
			7 => 'Juli',
			8 => 'Agustus',
			9 => 'September',
			10 => 'Oktober',
			11 => 'November',
			12 => 'Desember',
		);
		$bl = date('n', strtotime($waktu));
		$bulan = $bulan_array[$bl];
		$tahun = date('Y', strtotime($waktu));
		$jam = date( 'H:i:s', strtotime($waktu));
		
		//untuk menampilkan hari, tanggal bulan tahun jam
		//return "$hari, $tanggal $bulan $tahun $jam";

		//untuk menampilkan hari, tanggal bulan tahun
		return "$hari, $tanggal $bulan $tahun";
	}

}
